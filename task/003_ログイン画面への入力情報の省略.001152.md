# ログイン画面への入力情報の省略 - 設計書

**LLMモデル名**: Claude Opus 4.5 (claude-opus-4-5-20251101)

---

## 概要

ログイン画面（login.html）にGETパラメータから認証情報を自動セットする機能を追加する。

## 対象URL形式

```
http://localhost:8888/pages/login.html?contract-id=XXX&client-id=XXX&client-secret=XXX&environment=dev
```

## GETパラメータ

| パラメータ名 | 対応するフィールド | 説明 |
|-------------|------------------|------|
| `contract-id` | #contract-id | 契約ID |
| `client-id` | #client-id | クライアントID |
| `client-secret` | #client-secret | クライアントシークレット |
| `environment` | input[name="environment"] | 環境（`dev` または `prod`） |

## 実装方針

### 変更対象ファイル
- `public/pages/login.html`

### 実装内容

`DOMContentLoaded` イベント内で、URLSearchParamsを使用してGETパラメータを取得し、対応する入力フィールドに値をセットする。

```javascript
// GETパラメータから認証情報を取得して自動セット
const urlParams = new URLSearchParams(window.location.search);

const contractIdParam = urlParams.get('contract-id');
const clientIdParam = urlParams.get('client-id');
const clientSecretParam = urlParams.get('client-secret');

if (contractIdParam) {
  document.getElementById('contract-id').value = contractIdParam;
}
if (clientIdParam) {
  document.getElementById('client-id').value = clientIdParam;
}
if (clientSecretParam) {
  document.getElementById('client-secret').value = clientSecretParam;
}
```

### 実装位置

既存の `DOMContentLoaded` イベントハンドラ内、ログインチェックの前に追加する。

```javascript
window.addEventListener('DOMContentLoaded', function() {
  // ★ここに追加: GETパラメータから認証情報を自動セット
  const urlParams = new URLSearchParams(window.location.search);
  // ...

  if (Auth.isLoggedIn()) {
    window.location.href = '/pages/products.html';
  }
});
```

## セキュリティ考慮事項

- GETパラメータに認証情報を含めるため、URLがブラウザ履歴やサーバーログに残る可能性がある
- 本番環境での使用時は注意が必要
- 開発・テスト用途を想定した機能

## テスト方法

1. 以下のURLでアクセス:
   ```
   http://localhost:8888/pages/login.html?contract-id=test123&client-id=abc&client-secret=xyz
   ```
2. 各入力フィールドに値が自動的にセットされていることを確認
